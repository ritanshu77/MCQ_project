<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Quiz Portal</title>
    <style>
        :root {
            --primary-blue: #008ecc;
            --success-green: #4caf50;
            --error-red: #ff5252;
            --bg-gray: #f4f7f6;
        }

        body { font-family: sans-serif; margin: 0; background: var(--bg-gray); }

        /* Top Navbar */
        .top-nav {
            background: white; height: 60px; display: flex; align-items: center;
            justify-content: space-between; padding: 0 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            position: sticky; top: 0; z-index: 1000;
        }

        .toggle-btn { font-size: 24px; cursor: pointer; display: none; border: none; background: none; }

        /* Layout Container */
        .wrapper { display: flex; padding: 20px; gap: 20px; max-width: 1300px; margin: auto; }

        /* Main Content */
        .main-content { flex: 3; }
        .card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 20px; }

        /* Options */
        .option { 
            padding: 15px; border: 1px solid #ddd; border-radius: 6px; 
            margin-top: 10px; cursor: pointer; transition: 0.2s; 
        }
        .option:hover { background: #f9f9f9; }
        .option.active { background: var(--success-green) !important; color: white; border-color: var(--success-green); }

        /* Sidebar */
        .sidebar { flex: 1; min-width: 300px; transition: 0.3s; }

        /* Question Palette */
        .palette { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-top: 15px; }
        .q-box { 
            height: 40px; display: flex; align-items: center; justify-content: center; 
            background: white; border: 1px solid #ccc; border-radius: 4px; cursor: pointer;
            font-weight: bold;
        }
        .q-box.answered { background: var(--success-green); color: white; border: none; }
        .q-box.current { border: 2px solid var(--primary-blue); color: var(--primary-blue); }

        /* Modal Styles */
        .modal-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); z-index: 2000; align-items: center; justify-content: center;
        }
        .modal-box {
            background: white; padding: 30px; border-radius: 15px; width: 90%; max-width: 400px;
            text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.3); animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        .result-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 20px 0; }
        .res-item { padding: 15px; border-radius: 10px; font-weight: bold; }

        /* Mobile Responsive */
        @media (max-width: 992px) {
            .toggle-btn { display: block; }
            .wrapper { flex-direction: column; }
            .sidebar {
                position: fixed; top: 60px; right: -100%; height: calc(100vh - 60px);
                background: white; z-index: 999; box-shadow: -5px 0 15px rgba(0,0,0,0.1);
                width: 280px; padding: 20px; overflow-y: auto;
            }
            .sidebar.active { right: 0; }
        }

        .btn-full { width: 100%; padding: 12px; background: var(--primary-blue); color: white; border: none; border-radius: 4px; cursor: pointer; margin-top: 10px; font-weight: bold;}
        .btn-full:disabled { background: #ccc; cursor: not-allowed; }
    </style>
</head>
<body>

<nav class="top-nav">
    <div style="font-weight: bold; color: var(--primary-blue);">QUIZ PORTAL</div>
    <div id="timer">Time Taken: 00 : 00 : 00</div>
    <button class="toggle-btn" onclick="toggleSidebar()">â˜°</button>
</nav>

<div class="wrapper">
    <div class="main-content">
        <div class="card" id="question-card">
            <div style="display: flex; justify-content: space-between; border-bottom: 1px solid #eee; padding-bottom: 10px;">
                <strong id="q-number">Question-1</strong>
                <span id="q-status" style="color: var(--success-green); font-weight: bold;">+1.00</span>
            </div>
            <p id="q-text" style="font-size: 1.1rem; margin: 20px 0;">Loading question...</p>
            <div id="options-container"></div>
        </div>
        
        <div style="display: flex; justify-content: space-between;">
            <button class="btn-full" id="prev-btn" style="width: auto; background: #888;" onclick="changeQuestion(-1)">Previous</button>
            <button class="btn-full" id="next-btn" style="width: auto;" onclick="changeQuestion(1)">Next Question</button>
        </div>
    </div>

    <div class="sidebar" id="sidebar">
        <div class="card">
            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                <div style="width: 35px; height: 35px; background: #ff5252; border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center;">RP</div>
                <strong>Ritanshu Patwa</strong>
            </div>
            <p>Marks Scored: <span id="total-marks">0.00</span></p>
            <div style="display: flex; justify-content: space-between; font-size: 12px;">
                <span style="color: var(--error-red);" id="wrong-count">0 Incorrect</span>
                <span style="color: var(--success-green);" id="correct-count">0 Correct</span>
            </div>
        </div>

        <div class="card">
            <center><strong>Question Palette</strong></center>
            <div class="palette" id="q-palette"></div>
            <button class="btn-full" style="margin-top: 20px;" onclick="calculateResult()">Finish & View Summary</button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="modal">
    <div class="modal-box">
        <h2 style="margin: 0; color: var(--primary-blue);">Test Summary ðŸ“Š</h2>
        <div class="result-grid">
            <div class="res-item" style="background: #e8f5e9; color: var(--success-green);">
                <div id="m-correct" style="font-size: 24px;">0</div> Correct
            </div>
            <div class="res-item" style="background: #ffebee; color: var(--error-red);">
                <div id="m-wrong" style="font-size: 24px;">0</div> Incorrect
            </div>
        </div>
        <p>Total Score: <strong id="m-score">0.00</strong></p>
        <button class="btn-full" onclick="location.reload()">Submit Quiz</button>
        <button class="btn-full" style="background: #888;" onclick="closeModal()">Review Answers</button>
    </div>
</div>

<script>
    const quizData = [
        { q: "In which data transmission mode can two devices either send data or receive data but not both at the same time?", options: ["Complex", "Simplex", "Half duplex", "Full duplex"], correct: 2 },
        { q: "Which protocol is used to send emails?", options: ["HTTP", "FTP", "SMTP", "SSH"], correct: 2 },
        { q: "What is the brain of a computer system?", options: ["ALU", "CPU", "RAM", "Control Unit"], correct: 1 },
        { q: "Which memory is volatile in nature?", options: ["ROM", "RAM", "Hard Disk", "Flash Drive"], correct: 1 }
    ];

    let currentIdx = 0;
    let userAnswers = new Array(quizData.length).fill(null);

    function loadQuestion() {
        const data = quizData[currentIdx];
        document.getElementById('q-number').innerText = `Question-${currentIdx + 1}`;
        document.getElementById('q-text').innerText = data.q;
        const optionsContainer = document.getElementById('options-container');
        optionsContainer.innerHTML = "";
        data.options.forEach((opt, i) => {
            const div = document.createElement('div');
            div.className = `option ${userAnswers[currentIdx] === i ? 'active' : ''}`;
            div.innerText = opt;
            div.onclick = () => selectOption(i);
            optionsContainer.appendChild(div);
        });
        document.getElementById('prev-btn').disabled = currentIdx === 0;
        document.getElementById('next-btn').innerText = currentIdx === quizData.length - 1 ? "Finish" : "Next Question";
        updatePalette();
    }

    function selectOption(index) {
        userAnswers[currentIdx] = index;
        loadQuestion();
    }

    function changeQuestion(step) {
        if (step === 1 && currentIdx === quizData.length - 1) {
            calculateResult();
            return;
        }
        currentIdx += step;
        loadQuestion();
    }

    function updatePalette() {
        const palette = document.getElementById('q-palette');
        palette.innerHTML = "";
        quizData.forEach((_, i) => {
            const box = document.createElement('div');
            box.className = `q-box ${userAnswers[i] !== null ? 'answered' : ''} ${currentIdx === i ? 'current' : ''}`;
            box.innerText = i + 1;
            box.onclick = () => { currentIdx = i; loadQuestion(); if(window.innerWidth < 992) toggleSidebar(); };
            palette.appendChild(box);
        });
    }

    let totalSeconds = 0;
    setInterval(() => {
        totalSeconds++;
        const hrs = String(Math.floor(totalSeconds / 3600)).padStart(2, '0');
        const mins = String(Math.floor((totalSeconds % 3600) / 60)).padStart(2, '0');
        const secs = String(totalSeconds % 60).padStart(2, '0');
        document.getElementById('timer').innerText = `Time Taken: ${hrs} : ${mins} : ${secs}`;
    }, 1000);

    function toggleSidebar() { document.getElementById('sidebar').classList.toggle('active'); }

    function calculateResult() {
        let correct = 0;
        let incorrect = 0;
        userAnswers.forEach((ans, i) => {
            if(ans !== null) {
                if(ans === quizData[i].correct) correct++;
                else incorrect++;
            }
        });
        
        // Update Sidebar
        document.getElementById('correct-count').innerText = `${correct} Correct`;
        document.getElementById('wrong-count').innerText = `${incorrect} Incorrect`;
        const score = (correct * 1).toFixed(2);
        document.getElementById('total-marks').innerText = score;

        // Update & Show Modal
        document.getElementById('m-correct').innerText = correct;
        document.getElementById('m-wrong').innerText = incorrect;
        document.getElementById('m-score').innerText = score;
        document.getElementById('modal').style.display = 'flex';
    }

    function closeModal() { document.getElementById('modal').style.display = 'none'; }

    loadQuestion();
</script>
</body>
</html>